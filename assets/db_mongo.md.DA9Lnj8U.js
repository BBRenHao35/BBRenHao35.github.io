import{_ as s,o as i,c as a,R as n}from"./chunks/framework.UjU5Kp2a.js";const l="/assets/mongodb-compass.oMiqgoeA.png",p="/assets/mongoweb-login.Qxae2SU3.png",h="/assets/mongo-express.3tL3xsq_.png",e="/assets/mongo-local.A8SkUgCy.png",t="/assets/mongo-compass.eNYOPsvR.jpg",o="/assets/mongo-express-ui.uiLERY7I.png",u=JSON.parse('{"title":"Mongo + Mongo Express","description":"","frontmatter":{},"headers":[],"relativePath":"db/mongo.md","filePath":"db/mongo.md","lastUpdated":1741284293000}'),k={name:"db/mongo.md"},r=n('<h1 id="mongo-mongo-express" tabindex="-1">Mongo + Mongo Express <a class="header-anchor" href="#mongo-mongo-express" aria-label="Permalink to &quot;Mongo + Mongo Express&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">建立時間：2023/12/17</p><p>Mongo DB 簡介</p></div><h2 id="mongo-db-簡介" tabindex="-1">📌 Mongo DB 簡介 <a class="header-anchor" href="#mongo-db-簡介" aria-label="Permalink to &quot;:pushpin: Mongo DB 簡介&quot;">​</a></h2><ul><li>NoSQL 非關聯式資料庫</li><li>應用-JSON資料儲存、即時數據、大數據、低價值檔案儲存</li><li>階層: Database =&gt; Collection =&gt; Document</li><li>Collection: 類似Table的概念</li><li>Document: 自動產生_id(Primary Key)、每一筆被儲存的資料BSON(binary JSON)</li><li>Indexes: 增加不同欄位的搜尋，可以透過條件搜尋加快速度</li></ul><p><img src="'+l+`" alt="pgadmin"></p><h2 id="docker-compose-mongo-db-mongo-express" tabindex="-1">📌 Docker Compose Mongo DB + Mongo Express <a class="header-anchor" href="#docker-compose-mongo-db-mongo-express" aria-label="Permalink to &quot;:pushpin: Docker Compose Mongo DB + Mongo Express&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">建立時間：2023/12/15</p><p>用 Docker Compose 建立 Mongo DB + Mongo Express GUI 微服務</p></div><h2 id="docker-compose" tabindex="-1">📌 Docker Compose <a class="header-anchor" href="#docker-compose" aria-label="Permalink to &quot;:pushpin: Docker Compose&quot;">​</a></h2><ul><li>建立 mongo.yaml 檔</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mongo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mongo</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Pull mongo Image</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mongo-docker</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MONGO_INITDB_ROOT_USERNAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mongoadmin</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 登入帳號</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MONGO_INITDB_ROOT_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mongoadmin</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 登入密碼</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;27017:27017&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Port 本機27017:服務27017</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./mongo-data:/db</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Data存放路徑</span></span></code></pre></div><ul><li>建立 mongo-express.yaml 檔</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mongo-express</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mongo-express</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Pull mongo-express Image</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mongo-express</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ME_CONFIG_MONGODB_SERVER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mongo</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 連線到mongo服務</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ME_CONFIG_BASICAUTH_USERNAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">admin</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 進入web UI Alert的帳號</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ME_CONFIG_BASICAUTH_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">changeme</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 進入web UI Alert的密碼</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ME_CONFIG_MONGODB_ADMINUSERNAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mongoadmin</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Connect Db帳號</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ME_CONFIG_MONGODB_ADMINPASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mongoadmin</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Connect Db密碼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      #ME_CONFIG_MONGODB_URL: mongodb://mongoadmin:mongoadmin@localhost:27017/ # 連接Url紀錄 mongodb://帳號:密碼@ip:port</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;28081:8081&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./mongo-express-data:/data</span></span></code></pre></div><h2 id="進入-mongo-gui-連線到-mongo-db" tabindex="-1">📌 進入 Mongo GUI 連線到 Mongo DB <a class="header-anchor" href="#進入-mongo-gui-連線到-mongo-db" aria-label="Permalink to &quot;:pushpin: 進入 Mongo GUI 連線到 Mongo DB&quot;">​</a></h2><ul><li>拉取 Image、啟動服務</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mongo.yaml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 執行 mongo.yaml 內的 設定</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mongo.yaml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 啟動服務</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mongo-express.yaml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 執行 mongo-express.yaml 內的 設定</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mongo-express.yaml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 啟動服務</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 查看 Container</span></span></code></pre></div><ul><li><code>http://localhost:28081</code> (Login: <code>admin</code> / <code>changeme</code>)</li></ul><p><img src="`+p+'" alt="docker-mongoweb-login"><img src="'+h+'" alt="docker-pgadmin-ui"></p><h2 id="使用本機-mongodb-compass-登入-mongo-db" tabindex="-1">📌 使用本機 MongoDB Compass 登入 Mongo DB <a class="header-anchor" href="#使用本機-mongodb-compass-登入-mongo-db" aria-label="Permalink to &quot;:pushpin: 使用本機 MongoDB Compass 登入 Mongo DB&quot;">​</a></h2><ul><li>下載安裝MongoDB Compass</li><li>Username/Password <ul><li>Username: mongoadmin</li><li>Password: mongoadmin</li></ul></li></ul><p><img src="'+e+'" alt="docker-mongo-compass"><img src="'+t+'" alt="docker-mongo-compass"><img src="'+o+'" alt="docker-mongo-compass"></p>',20),g=[r];function d(E,c,m,y,F,D){return i(),a("div",null,g)}const C=s(k,[["render",d]]);export{u as __pageData,C as default};
