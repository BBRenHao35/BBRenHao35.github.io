import{_ as s,o as i,c as a,R as n}from"./chunks/framework.UjU5Kp2a.js";const e="/assets/sonarqube.0-j9izqb.png",l="/assets/locally.8igNSX_9.jpg",t="/assets/generate_token.-EfdTHF1.jpg",p="/assets/continue.YpCcfJbn.jpg",h="/assets/net_core.2aWloFF2.jpg",k="/assets/sonar_cmd.QRie9WFg.jpg",r="/assets/project_path.UGgnN0zc.jpg",o="/assets/sonar_scanner.s7jObjdu.jpg",c="/assets/scanner_result.Nckx7oV4.jpg",q=JSON.parse('{"title":"Sonarqube","description":"","frontmatter":{},"headers":[],"relativePath":"security/sonarqube.md","filePath":"security/sonarqube.md","lastUpdated":1743167921000}'),d={name:"security/sonarqube.md"},E=n(`<h1 id="sonarqube" tabindex="-1">Sonarqube <a class="header-anchor" href="#sonarqube" aria-label="Permalink to &quot;Sonarqube&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">建立時間：2025/03/07</p><ul><li>開源程式碼品質、分析工具</li><li>靜態程式分析(SAST): 掃描Souce Code</li></ul></div><h2 id="sonarqube-docker-compoes" tabindex="-1">📌 Sonarqube Docker Compoes <a class="header-anchor" href="#sonarqube-docker-compoes" aria-label="Permalink to &quot;:pushpin: Sonarqube Docker Compoes&quot;">​</a></h2><ul><li>建立 ../sonarqube/docker-compose.yaml</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  sonarqube</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sonarqube:latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sonarqube</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;9000:9000&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # - SONARQUBE_JDBC_URL=jdbc:postgresql://{IP or docker service name}:{PostgreSqlPort}/sonar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SONARQUBE_JDBC_URL=jdbc:postgresql://postgres:5432/sonar</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # DB Source</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SONARQUBE_JDBC_USERNAME=sa</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # DB UserName</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SONARQUBE_JDBC_PASSWORD=000000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # DB Password</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./sonarqube_data:/opt/sonarqube/data:rw&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 儲存 SonarQube 資料(分析結果)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./sonarqube_logs:/opt/sonarqube/logs:rw&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # logs 資料</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./sonarqube_extensions:/opt/sonarqube/extensions:rw&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # SonarQube 如果有安裝額外的插件功能，會存放在這</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">docker_networks</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 表示postgres服務要加入docker_networks網路</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  docker_networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 如果少了這一行，他會嘗試建立 docker_networks，但如果網路已存在會出錯，所以先建立網路，在加上這一行。</span></span></code></pre></div><h2 id="pull-image、run-service" tabindex="-1">📌 Pull Image、Run Service <a class="header-anchor" href="#pull-image、run-service" aria-label="Permalink to &quot;:pushpin: Pull Image、Run Service&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 執行 redis.yaml 內的設定</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 啟動服務</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 查看 Container</span></span></code></pre></div><ul><li><code>http://localhost:9090</code> (Login: <code>admin</code> / <code>admin</code>) <img src="`+e+'" alt="sonarqube"></li></ul><h2 id="掃描流程" tabindex="-1">📌 掃描流程 <a class="header-anchor" href="#掃描流程" aria-label="Permalink to &quot;:pushpin: 掃描流程&quot;">​</a></h2><ul><li><p>點選 Locally <img src="'+l+'" alt="pgadmin"></p></li><li><p>點選 Generate <img src="'+t+'" alt="generate_token"></p></li><li><p>點選 Continue <img src="'+p+'" alt="continue"></p></li><li><p>點選 Net、.Net Core <img src="'+h+'" alt="continue"></p></li><li><p>會顯示要執行的指令 <img src="'+k+'" alt="sonar_cmd"></p></li><li><p>再到專案路徑底下執行CMD開啟終端機 <img src="'+r+'" alt="project_path"></p></li><li><p>執行提供的指令 <img src="'+o+'" alt="sonar_scanner"></p></li><li><p>掃描完成顯示掃描結果 <img src="'+c+'" alt="scanner_result"></p></li></ul>',10),g=[E];function u(y,_,m,F,b,D){return i(),a("div",null,g)}const C=s(d,[["render",u]]);export{q as __pageData,C as default};
